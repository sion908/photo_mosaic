# キャンドルナイトモザイクアート

## 概要
このアプリケーションは、学校の閉校イベントにおいて、キャンドルナイトで制作されたキャンドルの写真を用いて、校章をベースとしたモザイクアートをリアルタイムで生成・表示するツールです。参加者全員の思い出を一つのアート作品として集約し、学校への感謝と敬意を表現します。

## 特徴
- 参加者が制作したキャンドルの写真を集めて一つの大きな校章モザイクに
- リアルタイムで写真が追加されるたびにモザイクが更新される
- 写真撮影機能とファイルアップロード機能を内蔵
- インターネット接続不要のスタンドアロンアプリケーション

## インストール方法

### 必要なもの
- Python 3.7 以上
- 以下のPythonライブラリ:
  - OpenCV
  - Pillow (PIL)
  - Tkinter (通常Pythonに同梱)

### セットアップ手順
1. リポジトリをクローンまたはダウンロード:
   ```
   git clone [リポジトリURL] candlelight-mosaic
   ```
   または、zipファイルをダウンロードして解凍

2. 必要なライブラリをインストール:
   ```
   pip install opencv-python pillow
   ```

3. 校章画像の準備:
   - 学校の校章画像を `school_logo.png` という名前でアプリケーションのフォルダに保存
   - 初回起動時に画像がない場合は、サンプル画像が自動生成されます

## 使い方

### アプリケーションの起動
```
python candlemosaic.py
```

### 基本操作
1. **写真の取り込み**
   - 「写真を取り込む」ボタン: 既存の写真ファイル(.jpg, .png)を選択して追加
   - 「カメラで撮影」ボタン: PCに接続されたカメラで撮影し、自動的に追加

2. **モザイク表示**
   - 右側のパネルに生成されたモザイクアートが表示されます
   - 新しい写真が追加されると自動的に更新されます
   - 「モザイクを更新」ボタンで手動更新も可能

3. **設定調整**
   - タイルサイズスライダー: モザイクの細かさを調整できます
     - 小さい値: より細かいモザイク
     - 大きい値: より粗いモザイク

4. **写真管理**
   - 取り込んだ写真の一覧がリストに表示されます
   - 写真を選択して「選択した写真を削除」ボタンで個別に削除できます

### イベントでの使用方法
1. PCをプロジェクターや大型モニターに接続
2. アプリケーションを起動し、全画面表示
3. 参加者がキャンドルを制作するたびに写真を撮影・追加
4. 徐々に完成していくモザイクアートを来場者と共有

## 技術情報
- **使用言語**: Python
- **GUI**: Tkinter
- **画像処理**: OpenCV, Pillow
- **データベース**: SQLite (写真パスとタイムスタンプを管理)

## 注意事項
- **プライバシー保護**: 人物が写り込む写真を使用する場合は、事前に使用許可を得てください
- **パフォーマンス**: 多数の高解像度写真を使用する場合、処理に時間がかかる場合があります
- **バックアップ**: 定期的にデータベースファイル (`candle_mosaic.db`) とキャプチャ画像フォルダ (`captures/`) をバックアップすることをお勧めします

## トラブルシューティング
- **カメラが認識されない**: PCのカメラドライバーが正しくインストールされているか確認
- **写真が表示されない**: ファイルパスが有効か、アクセス権限があるか確認
- **アプリが起動しない**: 必要なライブラリが正しくインストールされているか確認

## 開発・カスタマイズ
- 校章画像を変更することで、別のベース画像を使用できます
- コード内のパラメータ（エッジ検出しきい値など）を調整して表示を最適化できます
- 写真自動取込フォルダを設定する機能を追加することも可能です

## ライセンス
このアプリケーションは、[ライセンス情報] の下で配布されています。

## 謝辞
このアプリケーションの開発にあたり、ご協力いただいた学校関係者の皆様に感謝いたします。
